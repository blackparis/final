{% extends "admin/layout.html" %}

{% block title %}
    Add Product
{% endblock %}

{% block script %}
    <script src="{{ url_for('static', filename='admin/addproduct.js') }}"></script>
{% endblock %}

{% block style %}
    <style>
        #addproduct_form {text-align: center; padding: 20px;}        
        #thumbnail {height: 150px;}
        #new_product {text-align: center; padding: 30px;}
    </style>
{% endblock %}


{% block body %}
    <div style="text-align: center;">
        <a href="{{ url_for('admin_products') }}">All Products</a>
    </div>
    <hr>
    <form action="{{ url_for('admin_add_product') }}" method="POST" enctype="multipart/form-data">
        <div class="row" id="addproduct_form">
            <div class="col-lg-3">
                <div class="form-group">
                    <label for="name"><span class="requirement">*</span>Product Name</label>
                    <input type="text" class="form-control" id="name" name="name" autofocus>
                </div>
                <div class="form-group">
                    <label for="category"><span class="requirement">*</span>Product Category</label>
                    <input type="text" class="form-control" id="category" name="category">
                </div>
            </div>
            <div class="col-lg-3">
                <div class="form-group">
                    <label for="subcategory">Product Sub-Category</label>
                    <input type="text" class="form-control" id="subcategory" name="subcategory">
                </div>
                <div class="form-group">
                    <label for="unit"><span class="requirement">*</span>Product Unit</label>
                    <input type="text" class="form-control" id="unit" name="unit">
                </div>
            </div>
            <div class="col-lg-3">
                <div class="form-group">
                    <label for="price"><span class="requirement">*</span>Product Price</label>
                    <input type="text" class="form-control" id="price" name="price">
                </div>
                <div class="form-group">
                    <label for="stock"><span class="requirement">*</span>Stock Quantity</label>
                    <input type="text" class="form-control" id="stock" name="stock">
                </div>
            </div>
            <div class="col-lg-3">
                <div class="form-group">
                    <label for="image"><span class="requirement">*</span>Product Image</label><br><br>
                    {{ form.csrf_token }}
                    {{ form.photo() }}
                </div>
            </div>
        </div>
        <div style="text-align: center;">        
            <button type="submit" class="btn btn-primary">Add</button>
            {% if add_product_error %}
                <br>
                <span class="errorMessage">{{ add_product_error }}</span>
            {% endif %}            
        </div>
    </form>
    <hr>
    {% if product %}
    <div class="row" id="new_product">
        <div class="col-lg-3">
            <a href="{{ product['url'] }}" target="_blank">
                <img src="{{ product['url'] }}" id="thumbnail" class="img-thumbnail">
            </a>            
        </div>
        <div class="col-lg-3">
            <div>
                Name: {{product['name']}}
            </div>
            <div>
                Category: {{product['category']}}
            </div>
            <div>
                {% if product['subcategory'] %}
                    SubCategory: {{product['subcategory']}}
                {% endif %}
            </div>
        </div>
        <div class="col-lg-3">
            <div>
                Unit: {{product['unit']}}
            </div>
            <div>
                Price: Rs {{product['price']}}
            </div>
            <div>
                Stock: {{product['stock']}}
            </div>
        </div>
        <div class="col-lg-3">
            <a href="{{ url_for('admin_change_product_image', name=product['name']) }}">Change Image</a><br>
            <a href="{{ url_for('admin_modify_product', name=product['name']) }}">Edit Details</a>
        </div>
    </div>
    <hr>
    {% endif %}
{% endblock %}

